<view class="page">
  <!-- 购物车为空 -->
  <view class="empty-cart" wx:if="{{cart.length === 0}}">
    <view class="empty-icon">
      <icon type="info" size="80" color="#ccc"></icon>
    </view>
    <text class="empty-text">购物车是空的</text>
    <button class="empty-btn" bindtap="onGoShopping">去逛逛</button>
  </view>

  <!-- 购物车商品列表 -->
  <view class="cart-container" wx:if="{{cart.length > 0}}">
    <view class="cart-list">
      <view class="cart-item" wx:for="{{cart}}" wx:key="id">
        <!-- 选择框 -->
        <checkbox class="checkbox" checked="{{item.selected}}" bindtap="onSelectItem" data-id="{{item.id}}"></checkbox>

        <!-- 商品图片 -->
        <view class="item-img-placeholder" style="background-color: {{item.bgColor || '#FF6B35'}};">
          <icon type="{{item.icon || 'success'}}" size="28" color="#fff"></icon>
        </view>

        <!-- 商品信息 -->
        <view class="item-info">
          <text class="item-name">{{item.name}}</text>
          <text class="item-price">¥{{item.price}}</text>
        </view>

        <!-- 数量控制 -->
        <view class="item-quantity">
          <view class="quantity-btn minus" bindtap="onQuantityChange" data-id="{{item.id}}" data-type="minus">
            <text>-</text>
          </view>
          <text class="quantity-num">{{item.quantity}}</text>
          <view class="quantity-btn plus" bindtap="onQuantityChange" data-id="{{item.id}}" data-type="plus">
            <text>+</text>
          </view>
        </view>

        <!-- 删除按钮 -->
        <view class="item-delete" catchtap="onDeleteItem" data-id="{{item.id}}">
          <icon type="warn" size="18" color="#999"></icon>
        </view>
      </view>
    </view>

    <!-- 底部结算栏 -->
    <view class="cart-footer">
      <view class="footer-left">
        <checkbox class="select-all" checked="{{allSelected}}" bindtap="onSelectAll"></checkbox>
        <text class="select-text">全选</text>
      </view>
      <view class="footer-right">
        <view class="total-price">
          <text class="total-label">合计:</text>
          <text class="total-amount">¥{{totalPrice}}</text>
        </view>
        <button class="checkout-btn" bindtap="onCheckout" disabled="{{selectedCount === 0}}">
          结算({{selectedCount}})
        </button>
      </view>
    </view>
  </view>

  <view class="bottom-space"></view>
</view>
