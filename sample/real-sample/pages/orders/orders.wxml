<view class="page">
  <!-- 订单筛选 -->
  <view class="order-filter">
    <view class="filter-item {{currentTab === 'all' ? 'active' : ''}}" bindtap="onTabChange" data-tab="all">全部</view>
    <view class="filter-item {{currentTab === 'pending' ? 'active' : ''}}" bindtap="onTabChange" data-tab="pending">待付款</view>
    <view class="filter-item {{currentTab === 'paid' ? 'active' : ''}}" bindtap="onTabChange" data-tab="paid">待发货</view>
    <view class="filter-item {{currentTab === 'shipped' ? 'active' : ''}}" bindtap="onTabChange" data-tab="shipped">待收货</view>
    <view class="filter-item {{currentTab === 'completed' ? 'active' : ''}}" bindtap="onTabChange" data-tab="completed">已完成</view>
  </view>

  <!-- 订单列表 -->
  <view class="order-list" wx:if="{{orders.length > 0}}">
    <view class="order-item" wx:for="{{orders}}" wx:key="id">
      <!-- 订单头部 -->
      <view class="order-header">
        <text class="order-no">订单号: {{item.orderNo}}</text>
        <text class="order-status {{item.status}}">{{item.statusText}}</text>
      </view>

      <!-- 订单商品 -->
      <view class="order-products">
        <view class="product-item" wx:for="{{item.products}}" wx:for-item="product" wx:key="id">
          <view class="product-img-placeholder" style="background-color: {{product.bgColor || '#FF6B35'}};">
            <icon type="{{product.icon || 'success'}}" size="24" color="#fff"></icon>
          </view>
          <view class="product-info">
            <text class="product-name">{{product.name}}</text>
            <view class="product-bottom">
              <text class="product-price">¥{{product.price}}</text>
              <text class="product-quantity">x{{product.quantity}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- 订单信息 -->
      <view class="order-info">
        <text class="info-item">下单时间: {{item.createTime}}</text>
        <text class="info-item" wx:if="{{item.address}}">收货地址: {{item.address.address}}</text>
      </view>

      <!-- 订单金额 -->
      <view class="order-total">
        <text class="total-label">实付款:</text>
        <text class="total-amount">¥{{item.total}}</text>
      </view>

      <!-- 订单操作 -->
      <view class="order-actions">
        <button class="action-btn secondary" wx:if="{{item.status === 'pending'}}" bindtap="onCancelOrder" data-id="{{item.id}}">取消订单</button>
        <button class="action-btn primary" wx:if="{{item.status === 'pending'}}" bindtap="onPayOrder" data-id="{{item.id}}">去支付</button>
        <button class="action-btn secondary" wx:if="{{item.status === 'shipped'}}" bindtap="onViewLogistics" data-id="{{item.id}}">查看物流</button>
        <button class="action-btn primary" wx:if="{{item.status === 'shipped'}}" bindtap="onConfirmReceipt" data-id="{{item.id}}">确认收货</button>
        <button class="action-btn secondary" wx:if="{{item.status === 'completed'}}" bindtap="onDeleteOrder" data-id="{{item.id}}">删除订单</button>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{orders.length === 0}}">
    <view class="empty-icon">
      <icon type="info" size="80" color="#ccc"></icon>
    </view>
    <text class="empty-text">暂无订单</text>
  </view>

  <view class="bottom-space"></view>
</view>
